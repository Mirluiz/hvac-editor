{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app/2d/controllers/canvas.controller.ts","app/2d/index.ts","app/2d/models/canvas.model.ts","app/2d/views/canvas.view.ts","app/app.ts","app/main.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import CanvasView from \"../views/canvas.view\";\nimport CanvasModel from \"../models/canvas.model\";\n\nclass CanvasController {\n    view: CanvasView\n    model: CanvasModel\n\n    constructor() {\n        this.model = new CanvasModel();\n        this.view = new CanvasView(this.model)\n        if (this.view.container){\n            this.view.container.addEventListener('mousemove', this.mouseMove.bind(this));\n            this.view.container.addEventListener('mousedown', this.mouseDown.bind(this));\n            this.view.container.addEventListener('mouseup', this.mouseUp.bind(this));\n        }\n    }\n\n    mouseDown(e: Event): void {\n        this.model.clicked = true;\n    }\n\n    mouseMove(e: MouseEvent): void {\n\n\n        if (!this.model.mouse){\n            this.model.mouse = {\n                x: e.offsetX,\n                y: e.offsetY\n            }\n        } else {\n            this.model.mouse.x = e.offsetX;\n            this.model.mouse.y = e.offsetY;\n        }\n\n        if (this.model.clicked){\n            if(this.model.offset){\n                this.model.offset.x += e.movementX;\n                this.model.offset.y += e.movementY;\n            } else {\n                this.model.offset = {\n                    x: 0,\n                    y: 0\n                }\n            }\n        }\n\n        this.view.draw();\n    }\n\n    mouseUp(e: Event) {\n        this.model.clicked = false;\n    }\n\n}\n\nexport default CanvasController;\n","import CanvasController from \"./controllers/canvas.controller\";\n\nclass Controller {\n    canvas: CanvasController = new CanvasController()\n}\n\nexport default Controller\n","import {IVec} from \"../../Geometry/vect\";\n\nclass CanvasModel {\n    mouse: IVec | null = null\n    clicked: boolean = false\n    keyboard: string | null = null\n    offset: IVec = {x: 0, y: 0}\n    config: IConfig = {\n        net: {\n            show: true,\n            step: 20\n        }\n    }\n}\n\ninterface IConfig {\n    net: {\n        show: boolean\n        step: 15 | 20 | 50\n    }\n}\n\nexport default CanvasModel\n","import {IVec} from \"../../Geometry/vect\";\nimport CanvasModel from \"../models/canvas.model\";\n\nclass CanvasView {\n    model: CanvasModel\n    container: HTMLCanvasElement | null\n\n    constructor(model: CanvasModel) {\n        this.model = model;\n        this.container = document.querySelector(\"#editor\");\n        this.init();\n    }\n\n    init(){\n        this.initCanvasContainer();\n    }\n\n    draw(){\n        this.clear();\n        this.drawNet()\n        this.drawMouse()\n    }\n\n    clear(){\n        const ctx = this.container?.getContext(\"2d\");\n\n        if (!ctx || !this.model.mouse || !this.container)return;\n\n        ctx.clearRect(0, 0, this.container.width, this.container.height);\n    }\n\n    drawMouse(){\n        const ctx = this.container?.getContext(\"2d\");\n\n        if (!ctx || !this.model.mouse)return;\n\n        ctx.save();\n\n        ctx.beginPath();\n        ctx.strokeStyle = 'red';\n        ctx.lineWidth = 2;\n        ctx.arc(this.model.mouse.x, this.model.mouse.y, 1, 0, 2 * Math.PI);\n\n        ctx.restore();\n    }\n\n    drawNet() {\n        const ctx = this.container?.getContext(\"2d\");\n\n        if (!ctx || !this.model.mouse || !this.container)return;\n        if (!this.model.config.net.show)return;\n\n        ctx.save();\n\n        ctx.beginPath();\n        ctx.lineWidth = 1;\n\n        let step = this.model.config.net.step;\n        let h = this.container.height;\n        let w = this.container.width;\n\n        let iV = 0;\n        let maxV = w/step\n        while (iV < maxV){\n            let from = this.getGlobalCoordinates(step * iV, 0);\n            let to = this.getGlobalCoordinates(step * iV, h);\n\n            ctx.moveTo(from.x, from.y);\n            ctx.lineTo(to.x, to.y);\n\n            iV++;\n        }\n\n        let iH = 0;\n        let maxH = h/step\n        while (iH < maxH) {\n            let from = this.getGlobalCoordinates(0, step * iH);\n            let to = this.getGlobalCoordinates(w, step * iH);\n\n            ctx.moveTo(from.x, from.y);\n            ctx.lineTo(to.x, to.y);\n\n            iH++;\n        }\n\n        ctx.stroke();\n\n        ctx.restore();\n\n    }\n\n    drawAxis() {\n        const ctx = this.container?.getContext(\"2d\");\n\n        if (!ctx || !this.model.mouse || !this.container)return;\n        if (!this.model.config.net.show)return;\n\n        ctx.save();\n\n        ctx.beginPath();\n\n        let step = this.model.config.net.step;\n        let h = this.container.height;\n        let w = this.container.width;\n        let _i = 0;\n        let _max = this.container.width/step\n        while (_i < _max){\n\n            ctx.moveTo(step * _i, 0);\n            ctx.lineTo(step * _i, h);\n\n            _i++;\n        }\n        ctx.stroke();\n\n        ctx.restore();\n    }\n\n    getGlobalCoordinates(x: number, y: number): IVec {\n        return {\n            x: x + this.model.offset.x,\n            y: y + this.model.offset.y,\n        }\n    }\n\n\n    initCanvasContainer(): void {\n        if (!this.container)return;\n\n        this.container.style.height = '600px';\n        this.container.style.width = '900px';\n        this.container.height = 600;\n        this.container.width = 900;\n        this.container.style.border = '1px solid black';\n    }\n}\n\nexport default CanvasView;\n","import {default as _2DController} from \"./2d\";\n\nclass App {\n  _2d: _2DController = new _2DController()\n\n\n  run() {}\n}\n\nexport default App\n","import App from './app';\n\nconst app = new App();\n\napp.run();"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvMmQvY29udHJvbGxlcnMvY2FudmFzLmNvbnRyb2xsZXIudHMiLCJhcHAvMmQvaW5kZXgudHMiLCJhcHAvMmQvbW9kZWxzL2NhbnZhcy5tb2RlbC50cyIsImFwcC8yZC92aWV3cy9jYW52YXMudmlldy50cyIsImFwcC9hcHAudHMiLCJhcHAvbWFpbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7OztBQ0FBLElBQUEsZ0JBQUEsZ0JBQUEsUUFBQSxzQkFBQSxDQUFBLENBQUE7QUFDQSxJQUFBLGlCQUFBLGdCQUFBLFFBQUEsd0JBQUEsQ0FBQSxDQUFBO0FBRUEsSUFBQSxtQkFBQSxhQUFBLFlBQUE7QUFJSSxhQUFBLGdCQUFBLEdBQUE7QUFDSSxhQUFLLEtBQUwsR0FBYSxJQUFJLGVBQUEsT0FBSixFQUFiO0FBQ0EsYUFBSyxJQUFMLEdBQVksSUFBSSxjQUFBLE9BQUosQ0FBZSxLQUFLLEtBQXBCLENBQVo7QUFDQSxZQUFJLEtBQUssSUFBTCxDQUFVLFNBQWQsRUFBd0I7QUFDcEIsaUJBQUssSUFBTCxDQUFVLFNBQVYsQ0FBb0IsZ0JBQXBCLENBQXFDLFdBQXJDLEVBQWtELEtBQUssU0FBTCxDQUFlLElBQWYsQ0FBb0IsSUFBcEIsQ0FBbEQ7QUFDQSxpQkFBSyxJQUFMLENBQVUsU0FBVixDQUFvQixnQkFBcEIsQ0FBcUMsV0FBckMsRUFBa0QsS0FBSyxTQUFMLENBQWUsSUFBZixDQUFvQixJQUFwQixDQUFsRDtBQUNBLGlCQUFLLElBQUwsQ0FBVSxTQUFWLENBQW9CLGdCQUFwQixDQUFxQyxTQUFyQyxFQUFnRCxLQUFLLE9BQUwsQ0FBYSxJQUFiLENBQWtCLElBQWxCLENBQWhEO0FBQ0g7QUFDSjtBQUVELHFCQUFBLFNBQUEsQ0FBQSxTQUFBLEdBQUEsVUFBVSxDQUFWLEVBQWtCO0FBQ2QsYUFBSyxLQUFMLENBQVcsT0FBWCxHQUFxQixJQUFyQjtBQUNILEtB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QUssU0FBTCxDQUFlLEtBQWYsQ0FBcUIsS0FBckIsR0FBNkIsT0FBN0I7QUFDQSxhQUFLLFNBQUwsQ0FBZSxNQUFmLEdBQXdCLEdBQXhCO0FBQ0EsYUFBSyxTQUFMLENBQWUsS0FBZixHQUF1QixHQUF2QjtBQUNBLGFBQUssU0FBTCxDQUFlLEtBQWYsQ0FBcUIsTUFBckIsR0FBOEIsaUJBQTlCO0FBQ0gsS0FSRDtBQVNKLFdBQUEsVUFBQTtBQUFDLENBcElELEVBQUE7QUFzSUEsUUFBQSxPQUFBLEdBQWUsVUFBZjs7Ozs7Ozs7O0FDeklBLElBQUEsUUFBQSxnQkFBQSxRQUFBLE1BQUEsQ0FBQSxDQUFBO0FBRUEsSUFBQSxNQUFBLGFBQUEsWUFBQTtBQUFBLGFBQUEsR0FBQSxHQUFBO0FBQ0UsYUFBQSxHQUFBLEdBQXFCLElBQUksTUFBQSxPQUFKLEVBQXJCO0FBSUQ7QUFEQyxRQUFBLFNBQUEsQ0FBQSxHQUFBLEdBQUEsWUFBQSxDQUFRLENBQVI7QUFDRixXQUFBLEdBQUE7QUFBQyxDQUxELEVBQUE7QUFPQSxRQUFBLE9BQUEsR0FBZSxHQUFmOzs7Ozs7Ozs7QUNUQSxJQUFBLFFBQUEsZ0JBQUEsUUFBQSxPQUFBLENBQUEsQ0FBQTtBQUVBLElBQU0sTUFBTSxJQUFJLE1BQUEsT0FBSixFQUFaO0FBRUEsSUFBSSxHQUFKIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IENhbnZhc1ZpZXcgZnJvbSBcIi4uL3ZpZXdzL2NhbnZhcy52aWV3XCI7XG5pbXBvcnQgQ2FudmFzTW9kZWwgZnJvbSBcIi4uL21vZGVscy9jYW52YXMubW9kZWxcIjtcblxuY2xhc3MgQ2FudmFzQ29udHJvbGxlciB7XG4gICAgdmlldzogQ2FudmFzVmlld1xuICAgIG1vZGVsOiBDYW52YXNNb2RlbFxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBuZXcgQ2FudmFzTW9kZWwoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IENhbnZhc1ZpZXcodGhpcy5tb2RlbClcbiAgICAgICAgaWYgKHRoaXMudmlldy5jb250YWluZXIpe1xuICAgICAgICAgICAgdGhpcy52aWV3LmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMudmlldy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd24uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLnZpZXcuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1vdXNlVXAuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBtb3VzZURvd24oZTogRXZlbnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5tb2RlbC5jbGlja2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBtb3VzZU1vdmUoZTogTW91c2VFdmVudCk6IHZvaWQge1xuXG5cbiAgICAgICAgaWYgKCF0aGlzLm1vZGVsLm1vdXNlKXtcbiAgICAgICAgICAgIHRoaXMubW9kZWwubW91c2UgPSB7XG4gICAgICAgICAgICAgICAgeDogZS5vZmZzZXRYLFxuICAgICAgICAgICAgICAgIHk6IGUub2Zmc2V0WVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5tb3VzZS54ID0gZS5vZmZzZXRYO1xuICAgICAgICAgICAgdGhpcy5tb2RlbC5tb3VzZS55ID0gZS5vZmZzZXRZO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMubW9kZWwuY2xpY2tlZCl7XG4gICAgICAgICAgICBpZih0aGlzLm1vZGVsLm9mZnNldCl7XG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC5vZmZzZXQueCArPSBlLm1vdmVtZW50WDtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLm9mZnNldC55ICs9IGUubW92ZW1lbnRZO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLm9mZnNldCA9IHtcbiAgICAgICAgICAgICAgICAgICAgeDogMCxcbiAgICAgICAgICAgICAgICAgICAgeTogMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudmlldy5kcmF3KCk7XG4gICAgfVxuXG4gICAgbW91c2VVcChlOiBFdmVudCkge1xuICAgICAgICB0aGlzLm1vZGVsLmNsaWNrZWQgPSBmYWxzZTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzQ29udHJvbGxlcjtcbiIsImltcG9ydCBDYW52YXNDb250cm9sbGVyIGZyb20gXCIuL2NvbnRyb2xsZXJzL2NhbnZhcy5jb250cm9sbGVyXCI7XG5cbmNsYXNzIENvbnRyb2xsZXIge1xuICAgIGNhbnZhczogQ2FudmFzQ29udHJvbGxlciA9IG5ldyBDYW52YXNDb250cm9sbGVyKClcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udHJvbGxlclxuIiwiaW1wb3J0IHtJVmVjfSBmcm9tIFwiLi4vLi4vR2VvbWV0cnkvdmVjdFwiO1xuXG5jbGFzcyBDYW52YXNNb2RlbCB7XG4gICAgbW91c2U6IElWZWMgfCBudWxsID0gbnVsbFxuICAgIGNsaWNrZWQ6IGJvb2xlYW4gPSBmYWxzZVxuICAgIGtleWJvYXJkOiBzdHJpbmcgfCBudWxsID0gbnVsbFxuICAgIG9mZnNldDogSVZlYyA9IHt4OiAwLCB5OiAwfVxuICAgIGNvbmZpZzogSUNvbmZpZyA9IHtcbiAgICAgICAgbmV0OiB7XG4gICAgICAgICAgICBzaG93OiB0cnVlLFxuICAgICAgICAgICAgc3RlcDogMjBcbiAgICAgICAgfVxuICAgIH1cbn1cblxuaW50ZXJmYWNlIElDb25maWcge1xuICAgIG5ldDoge1xuICAgICAgICBzaG93OiBib29sZWFuXG4gICAgICAgIHN0ZXA6IDE1IHwgMjAgfCA1MFxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzTW9kZWxcbiIsImltcG9ydCB7SVZlY30gZnJvbSBcIi4uLy4uL0dlb21ldHJ5L3ZlY3RcIjtcbmltcG9ydCBDYW52YXNNb2RlbCBmcm9tIFwiLi4vbW9kZWxzL2NhbnZhcy5tb2RlbFwiO1xuXG5jbGFzcyBDYW52YXNWaWV3IHtcbiAgICBtb2RlbDogQ2FudmFzTW9kZWxcbiAgICBjb250YWluZXI6IEhUTUxDYW52YXNFbGVtZW50IHwgbnVsbFxuXG4gICAgY29uc3RydWN0b3IobW9kZWw6IENhbnZhc01vZGVsKSB7XG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXRvclwiKTtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgaW5pdCgpe1xuICAgICAgICB0aGlzLmluaXRDYW52YXNDb250YWluZXIoKTtcbiAgICB9XG5cbiAgICBkcmF3KCl7XG4gICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5kcmF3TmV0KClcbiAgICAgICAgdGhpcy5kcmF3TW91c2UoKVxuICAgIH1cblxuICAgIGNsZWFyKCl7XG4gICAgICAgIGNvbnN0IGN0eCA9IHRoaXMuY29udGFpbmVyPy5nZXRDb250ZXh0KFwiMmRcIik7XG5cbiAgICAgICAgaWYgKCFjdHggfHwgIXRoaXMubW9kZWwubW91c2UgfHwgIXRoaXMuY29udGFpbmVyKXJldHVybjtcblxuICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY29udGFpbmVyLndpZHRoLCB0aGlzLmNvbnRhaW5lci5oZWlnaHQpO1xuICAgIH1cblxuICAgIGRyYXdNb3VzZSgpe1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmNvbnRhaW5lcj8uZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIGlmICghY3R4IHx8ICF0aGlzLm1vZGVsLm1vdXNlKXJldHVybjtcblxuICAgICAgICBjdHguc2F2ZSgpO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3JlZCc7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBjdHguYXJjKHRoaXMubW9kZWwubW91c2UueCwgdGhpcy5tb2RlbC5tb3VzZS55LCAxLCAwLCAyICogTWF0aC5QSSk7XG5cbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG5cbiAgICBkcmF3TmV0KCkge1xuICAgICAgICBjb25zdCBjdHggPSB0aGlzLmNvbnRhaW5lcj8uZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIGlmICghY3R4IHx8ICF0aGlzLm1vZGVsLm1vdXNlIHx8ICF0aGlzLmNvbnRhaW5lcilyZXR1cm47XG4gICAgICAgIGlmICghdGhpcy5tb2RlbC5jb25maWcubmV0LnNob3cpcmV0dXJuO1xuXG4gICAgICAgIGN0eC5zYXZlKCk7XG5cbiAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcblxuICAgICAgICBsZXQgc3RlcCA9IHRoaXMubW9kZWwuY29uZmlnLm5ldC5zdGVwO1xuICAgICAgICBsZXQgaCA9IHRoaXMuY29udGFpbmVyLmhlaWdodDtcbiAgICAgICAgbGV0IHcgPSB0aGlzLmNvbnRhaW5lci53aWR0aDtcblxuICAgICAgICBsZXQgaVYgPSAwO1xuICAgICAgICBsZXQgbWF4ViA9IHcvc3RlcFxuICAgICAgICB3aGlsZSAoaVYgPCBtYXhWKXtcbiAgICAgICAgICAgIGxldCBmcm9tID0gdGhpcy5nZXRHbG9iYWxDb29yZGluYXRlcyhzdGVwICogaVYsIDApO1xuICAgICAgICAgICAgbGV0IHRvID0gdGhpcy5nZXRHbG9iYWxDb29yZGluYXRlcyhzdGVwICogaVYsIGgpO1xuXG4gICAgICAgICAgICBjdHgubW92ZVRvKGZyb20ueCwgZnJvbS55KTtcbiAgICAgICAgICAgIGN0eC5saW5lVG8odG8ueCwgdG8ueSk7XG5cbiAgICAgICAgICAgIGlWKys7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaUggPSAwO1xuICAgICAgICBsZXQgbWF4SCA9IGgvc3RlcFxuICAgICAgICB3aGlsZSAoaUggPCBtYXhIKSB7XG4gICAgICAgICAgICBsZXQgZnJvbSA9IHRoaXMuZ2V0R2xvYmFsQ29vcmRpbmF0ZXMoMCwgc3RlcCAqIGlIKTtcbiAgICAgICAgICAgIGxldCB0byA9IHRoaXMuZ2V0R2xvYmFsQ29vcmRpbmF0ZXModywgc3RlcCAqIGlIKTtcblxuICAgICAgICAgICAgY3R4Lm1vdmVUbyhmcm9tLngsIGZyb20ueSk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHRvLngsIHRvLnkpO1xuXG4gICAgICAgICAgICBpSCsrO1xuICAgICAgICB9XG5cbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgICB9XG5cbiAgICBkcmF3QXhpcygpIHtcbiAgICAgICAgY29uc3QgY3R4ID0gdGhpcy5jb250YWluZXI/LmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICBpZiAoIWN0eCB8fCAhdGhpcy5tb2RlbC5tb3VzZSB8fCAhdGhpcy5jb250YWluZXIpcmV0dXJuO1xuICAgICAgICBpZiAoIXRoaXMubW9kZWwuY29uZmlnLm5ldC5zaG93KXJldHVybjtcblxuICAgICAgICBjdHguc2F2ZSgpO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcblxuICAgICAgICBsZXQgc3RlcCA9IHRoaXMubW9kZWwuY29uZmlnLm5ldC5zdGVwO1xuICAgICAgICBsZXQgaCA9IHRoaXMuY29udGFpbmVyLmhlaWdodDtcbiAgICAgICAgbGV0IHcgPSB0aGlzLmNvbnRhaW5lci53aWR0aDtcbiAgICAgICAgbGV0IF9pID0gMDtcbiAgICAgICAgbGV0IF9tYXggPSB0aGlzLmNvbnRhaW5lci53aWR0aC9zdGVwXG4gICAgICAgIHdoaWxlIChfaSA8IF9tYXgpe1xuXG4gICAgICAgICAgICBjdHgubW92ZVRvKHN0ZXAgKiBfaSwgMCk7XG4gICAgICAgICAgICBjdHgubGluZVRvKHN0ZXAgKiBfaSwgaCk7XG5cbiAgICAgICAgICAgIF9pKys7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuXG4gICAgZ2V0R2xvYmFsQ29vcmRpbmF0ZXMoeDogbnVtYmVyLCB5OiBudW1iZXIpOiBJVmVjIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHggKyB0aGlzLm1vZGVsLm9mZnNldC54LFxuICAgICAgICAgICAgeTogeSArIHRoaXMubW9kZWwub2Zmc2V0LnksXG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIGluaXRDYW52YXNDb250YWluZXIoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5jb250YWluZXIpcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICc2MDBweCc7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLndpZHRoID0gJzkwMHB4JztcbiAgICAgICAgdGhpcy5jb250YWluZXIuaGVpZ2h0ID0gNjAwO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci53aWR0aCA9IDkwMDtcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCBibGFjayc7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYW52YXNWaWV3O1xuIiwiaW1wb3J0IHtkZWZhdWx0IGFzIF8yRENvbnRyb2xsZXJ9IGZyb20gXCIuLzJkXCI7XG5cbmNsYXNzIEFwcCB7XG4gIF8yZDogXzJEQ29udHJvbGxlciA9IG5ldyBfMkRDb250cm9sbGVyKClcblxuXG4gIHJ1bigpIHt9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcFxuIiwiaW1wb3J0IEFwcCBmcm9tICcuL2FwcCc7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcblxuYXBwLnJ1bigpOyJdfQ=="}